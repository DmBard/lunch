<?php

namespace Ens\LunchBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * LunchRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class LunchRepository extends EntityRepository
{
    public function getCategoryDayLunches($currentDay, $currentCategory, $currentDescription)
    {
        $qb = $this->createQueryBuilder('l');

        if ($currentDay) {
            $qb->where('l.day = :dayOfWeek')
                ->setParameter('dayOfWeek', $currentDay);
        }

        if ($currentCategory) {
            $qb->andWhere('l.categories = :category_i')
                ->setParameter('category_i', $currentCategory);
        }

        if ($currentDescription) {
            $qb->andWhere('l.description = :description_i')
                ->setParameter('description_i', $currentDescription);
        }

        $query = $qb->getQuery();

        return $query->getResult();
    }

}